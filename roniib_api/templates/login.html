<!DOCTYPE html>
<html lang="en">
{% load static %}
<head>
    <meta charset="UTF-8">
    <meta name="author" content="Hezron Bii">
    <meta name="description" content="This website serves APIs to developers to power their applications">
    <meta
            name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="{% static 'images/light_blue_png.png' %}" type="image/x-image">
    <link rel="stylesheet" href="{% static '/css/main.css' %}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>Login</title>
</head>


<body>

<nav class="topnav">
    <img src="{% static 'images/light_blue_png.png' %}" alt="roniib icon" width="50" height="40"
         style="margin-top:10px;margin-left:10px;">
    <ul class="topLinks">
        <li><a href="{% url 'browse' %}" class="inactive">Browse APIS</a></li>
        <li><a href="{% url 'pricing' %}" class="inactive">Pricing</a></li>
        <li><a href="{% url 'contact' %}" class="inactive">Contact Us</a></li>
        {% if not request.user.is_authenticated %}
        <li><a href="{% url 'login' %}" class="active">Sign In</a></li>
        <li><a href="{% url 'register' %}" class="inactive">Register</a></li>
        {% else %}
        <li><a href="{% url 'logout' %}" class="inactive">Sign Out</a></li>
        <img src="{% static 'images/bgimg.jpg' %}"
             width="30" height="30" style="border-radius:30px;margin-top:5px">
        {% endif %}
    </ul>
</nav>
<div style="overflow-y: scroll;max-height: 100vh;">
    <div id="content">
        <div id="snackbar">cdfcfdcdfcdf</div>

        <div class="witc">

            <!--            <button onclick="showSnackbar()">Show Snackbar</button>-->

            <div class="incontent" style="background-color:white;margint-top:0px;padding-top:0px">
                <h1 class="regtext">Login</h1>
                <hr style="background-color: #013b51;height:2px;margin-top:0px">


                <form class="f-class" style="margin-left:30px">

                    <label for="username" style="font-size:15px">Username: </label>
                    <input type="text" id="username" required placeholder="Username" style="background-color: #f4f4f4;"><br>
                    <label for="password" style="font-size:15px">Password:</label>
                    <input type="password" id="password" required placeholder="Password"
                           style="background-color: #f4f4f4;"><br>


                    <div style="justify-content: center;display: flex;">
                        <p>Can't remember password? <a href='#'> Recover password</a></p>
                    </div>
                    <div style="justify-content: center;display: flex;">
                        <p>Don't have an account? <a href='register.html'> Sign up</a></p>
                    </div>
                    <div style="justify-content: center;display: flex;">
                        <button type="submit" id="signup" class="signupbtn">
                            <p>SIGN IN</p>
                        </button>
                    </div>
                </form>


                <p hidden id="csrf">{{csrf_token}}</p>
            </div>

        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        $('#signup').click(function(event) {
            event.preventDefault();
            var csrfToken=$('#csrf').text();


            var headers = {
                'X-CSRFToken': csrfToken
            };

            var username = $('#username').val();
            var password = $('#password').val();
            $.ajax({
                type: 'POST',
                url: '{% url 'login' %}',
                data: {
                    'username': username,
                    'password': password
                },
                headers: headers,
            success: function(data) {
            },                error: function(xhr, textStatus, errorThrown) {
                alert(errorThrown);
                    alert('Login failed'); // Show an error message
                }
            });
        });
    });

    function showSnackbar() {
        var snackbar = document.getElementById("snackbar");
        // Show the snackbar
        snackbar.style.display = "block";

        // Move it to the top
        snackbar.style.marginTop = "0";

        setTimeout(function() {
            snackbar.style.display = "none";
            snackbar.style.marginTop = "-50px"; // Reset the position
        }, 3000);
    }
</script>
</body>

</html>